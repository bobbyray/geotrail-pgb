<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2015, 2016 Robert R Schomburg
Licensed under terms of the MIT License, which is given at
https://github.com/bobbyray/MitLicense/releases/tag/v1.0
-->
<widget id="ws.wigo.geotrail" 
    version="1.1.026" xmlns="http://www.w3.org/ns/widgets" 
    xmlns:cdv="http://cordova.apache.org/ns/1.0"   
    xmlns:gap="http://phonegap.com/ns/1.0" > 
    <name>GeoTrail</name>
    <description>
        A Cordova application for viewing trail map online or offline.
    </description>
    <author email="bob.schomburg@wigo.ws" href="http://cordova.io">
        WIGO Dev Team
    </author>
    <!-- PhoneGap Build seems to always used index.html for content 
    <content src="Trail2.html" />
    -->
    <access origin="*" />
    <allow-intent href="http://*/*" />
    <allow-intent href="https://*/*" />
    <allow-intent href="tel:*" />
    <allow-intent href="sms:*" />
    <allow-intent href="mailto:*" />
    <allow-intent href="geo:*" />
    <!--android platform not used for PhoneGap Build 
    <icon platform="android" src="res/android/geotrail512x512.png" />
    <platform name="android">
        <allow-intent href="market:*" />
    </platform>
    -->
    
    <icon platform="ios" src="res/android/geotrail512x512.png" />
    <platform name="ios">
        <allow-intent href="itms:*" />
        <allow-intent href="itms-apps:*" />
        <plugin name="cordova-plugin-dialogs" source="npm" spec="1.1.1" />     
        <!-- cordova-plugin-file is installed by cordova-plug-in-file-transfer   
        <plugin name="cordova-plugin-file" source="pgb" spec="2.0.0" /> 
        --> 
        <plugin name="cordova-plugin-file-transfer" source="npm" spec="1.1.0" /> 
        <plugin name="cordova-plugin-geolocation" source="npm" spec="2.4.0" />

        <plugin name="cordova-plugin-vibration" source="npm" spec="1.2.0" /> 
        <plugin name="org.apache.cordova.device-orientation" spec="0.3.11" source="npm" />
        <plugin name="cordova-plugin-statusbar" spec="2.2.0" source="npm" />
        <plugin name="cordova-plugin-hockeyapp" spec="2.2.2" source="npm" />

        <!-- cordova-plugin-whitelist not found. 
        <plugin name="cordova-plugin-whitelist" source="pgb" spec="1.1.0" />
        -->

        <gap:plugin 
            src="https://github.com/Wizcorp/phonegap-facebook-plugin.git#0.9.0" >
            <param name="APP_ID" value=" 694318660701967" />
            <param name="APP_NAME" value="Wigo­G­e­o­T­rail" />
        </gap:plugin>
        
        <!-- ////20170728 neither v 0.9.0 nor 0.12.0 works.
        <gap:plugin name="com.phonegap.plugins.facebookconnect" version="0.12.0" >
            <param name="APP_ID" value=" 694318660701967" />
            <param name="APP_NAME" value="Wigo­G­e­o­T­rail" />
        </gap:plugin>
        
        <!-- ////20170728         
        <gap:plugin 
            src="https://github.com/Wizcorp/phonegap-facebook-plugin.git#0.9.0" >
            <param name="APP_ID" value=" 694318660701967" />
            <param name="APP_NAME" value="Wigo­G­e­o­T­rail" />
        </gap:plugin>
        -->
        
        <!-- //20161092 Build worked for phonegap-version cli-5.4.1, but went back to FacebookConnectPlugin version 0.9.0 
                        phone-gap cli-6.3.0 fails to build.
        <gap:plugin 
            src="https://github.com/dhatawesomedude/phonegap-facebook-plugin.git">
            <param name="APP_ID" value=" 694318660701967" />
            <param name="APP_NAME" value="Wigo­G­e­o­T­rail" />
        </gap:plugin>
        --> 

        <!--  cordova-plugin-network-information is not working for ios.
        <plugin name="cordova-plugin-network-information" source="npm" spec="1.3.2" />         
        -->
        
        <!-- //20161121 waketimer not used because cannot get app to run in background 
        <plugin spec="https://github.com/wnyc/cordova-plugin-wakeuptimer.git#1.0.1" source="git"/>
        -->
        
        <!-- //20161203 Comment out. local notification only working when phone call is interrupted, NOT when app is in background.
        <plugin name="cordova-plugin-local-notifications-mm" source="npm" spec="1.0.5" />
        -->

        <!-- //20161121 Comment out. Do NOT think this allows tracking in background 
        <gap:config-file platform="ios" parent="UIBackgroundModes" overwrite="true"> 
            <array> <string>location</string> </array> 
        </gap:config-file>    
        <gap:config-file platform="ios" parent="NSLocationAlwaysUsageDescription" overwrite="true"> 
            <array> <string>Detect off trail.</string> </array> 
        </gap:config-file>
        -->
        <!-- //20161119 Above is supposed to detect off trail by tracking geolocation in background. -->
        
        <preference name="StatusBarOverlaysWebView" value="false" /> 
        <preference name="StatusBarBackgroundColor" value="#A7A7A7"/>
        <preference name="StatusBarStyle" value="blacktranslucent" />        

        <!-- phone-gap version cli-6.3.0 fails to build. I think 6 or greater fails. -->
        <!-- 20170411 <preference name="phonegap-version" value="cli-5.4.1" /> -->
        <!-- 20170411 try default version to see if cordova-plugin-network-information will work -->
        <!-- 20170411 <preference name="phonegap-version" value="cli-6.0.0" /> --> <!-- 20170411 try cli-6.0.0 ios 4.0.1 for network-information -->
        <preference name="phonegap-version" value="cli-5.4.1" />
    </platform>
    
    <!-- Move ios UIBackgroundModes under platform for ios -->
    
</widget>
